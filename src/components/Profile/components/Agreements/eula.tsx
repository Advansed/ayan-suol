import React from 'react';
import { IonButton, IonContent, IonHeader, IonIcon, IonModal, IonTitle, IonToolbar } from '@ionic/react';
import { closeOutline } from 'ionicons/icons';
import { useLogin } from '../../../../Store/useLogin';
import { useAgreements } from './useAgreements';

interface EULAProps {
  isOpen: boolean;
  onClose: () => void;
}

const EULA: React.FC<EULAProps> = ({ isOpen, onClose }) => {
  const { agreements, toggleAgreement } = useAgreements()

  return (
    <IonModal isOpen={isOpen} onDidDismiss={onClose}>
          <IonHeader>
            <IonToolbar>
              <IonTitle>Пользовательское соглашение</IonTitle>
              <IonButton 
                fill="clear" 
                slot="end" 
                onClick={onClose}
              >
                <IonIcon icon={closeOutline} />
              </IonButton>
            </IonToolbar>
          </IonHeader>
          
          <IonContent className="ion-padding">
            <div className="eula-container">
              <div className="eula-content">
                <h1>Пользовательское соглашение</h1>
                
                <section>
                  <h2>Общие положения</h2>
                  <p>
                    Настоящее пользовательское соглашение является публичной офертой ООО "Груз в рейс" и определяет условия использования мобильного приложения и сайта "Груз в рейс" пользователями данного приложения.
                  </p>
                  <p>
                    Приложение и сайт создано в целях оказания содействия по заключению договоров перевозки грузов между заказчиками и перевозчиками, которые зарегистрированы в качестве пользователей Приложения.
                  </p>
                  <p>
                    ООО "Груз в рейс" и Приложение не являются диспетчерской службой и не осуществляют распределение Заказов на перевозку груза между Пользователями Приложения.
                  </p>
                </section>

                <section>
                  <h2>Термины</h2>
                  <ul>
                    <li><strong>Приложение и сайт "gruzreis.ru"</strong> – программное обеспечение для взаимодействия Заказчика и Грузоперевозчика</li>
                    <li><strong>Пользователь</strong> – юридическое или физическое лицо, прошедшее регистрацию в Приложении</li>
                    <li><strong>Пользователь-Заказчик</strong> – лицо, создающее заказы на перевозку грузов</li>
                    <li><strong>Пользователь-Перевозчик</strong> – лицо, осуществляющее поиск заказов на перевозку груза</li>
                    <li><strong>Регистрационный платеж</strong> – 100 рублей для подтверждения регистрации юридического лица</li>
                    <li><strong>Сервисное вознаграждение</strong> – 3,88% от стоимости договора перевозки</li>
                  </ul>
                </section>

                <section>
                  <h2>Регистрация пользователя</h2>
                  <h3>Этапы регистрации:</h3>
                  <ol>
                    <li>Выбор статуса: Заказчик или Перевозчик</li>
                    <li>Заполнение персональных/корпоративных данных</li>
                    <li>Создание логина и пароля (6-20 символов латиницей)</li>
                    <li>Подтверждение через SMS или регистрационный платеж</li>
                    <li>Получение уведомления об успешной регистрации</li>
                  </ol>
                  
                  <h3>Для физических лиц:</h3>
                  <p>ФИО, паспортные данные, адрес, email, телефон, ИНН, данные ТС</p>
                  
                  <h3>Для юридических лиц:</h3>
                  <p>Наименование, ОГРН, ИНН, адреса, банковские реквизиты, данные представителя</p>
                </section>

                <section>
                  <h2>Порядок пользования приложением</h2>
                  <h3>Права Пользователя-Перевозчика:</h3>
                  <ul>
                    <li>Просмотр заказов на перевозку</li>
                    <li>Направление запросов на выполнение заказов (при балансе от 1000 руб.)</li>
                    <li>Создание собственных заказов</li>
                    <li>Пользование личным кабинетом</li>
                    <li>Заключение договоров с ЭЦП</li>
                    <li>Отслеживание статуса заказов</li>
                  </ul>

                  <h3>Создание заказа включает:</h3>
                  <ul>
                    <li>Описание груза и его параметры</li>
                    <li>Маршрут перевозки</li>
                    <li>Сроки выполнения</li>
                    <li>Стоимость и способ оплаты</li>
                    <li>Требования к ТС и экипажу</li>
                  </ul>
                </section>

                <section>
                  <h2>Возврат денежных средств</h2>
                  <p>
                    ООО "Груз в рейс" производит возврат средств с баланса Перевозчика в течение 5 банковских дней, 
                    за исключением списанного сервисного вознаграждения.
                  </p>
                </section>

                <section>
                  <h2>Изменения соглашения</h2>
                  <p>
                    ООО "Груз в рейс" вправе изменять условия Соглашения в одностороннем порядке. 
                    При несогласии Пользователь должен в течение 10 дней уведомить об отказе от использования Приложения.
                  </p>
                </section>

                <section>
                  <h2>Ответственность сторон</h2>
                  <p>Пользователь использует Приложение на условиях «как есть» без гарантий.</p>
                  <p><strong>ООО "Груз в рейс" не несет ответственность за:</strong></p>
                  <ul>
                    <li>Неисполнение обязательств по договорам перевозки между Пользователями</li>
                    <li>Прерывание работы Приложения</li>
                    <li>Ущерб, причиненный третьими лицами</li>
                  </ul>
                </section>

                <section>
                  <h2>Заключительные условия</h2>
                  <p>Соглашение принимается с момента регистрации в Приложении.</p>
                  <p>Претензии направлять на: <a href="mailto:grusvreis@yandex.ru">grusvreis@yandex.ru</a></p>
                  <p>Срок рассмотрения претензий: 30 календарных дней.</p>
                </section>
              </div>
                {/* Accept Button */}
                <div className="mt-6 space-y-3">
                  <label className="flex items-center">
                    <input type="checkbox" className="mr-3" checked = { agreements?.userAgreement }/>
                    <span className="text-sm text-gray-700">Я прочитал(а) и согласен(на) с условиями пользовательского соглашения</span>
                  </label>
                  <IonButton 
                      color={ agreements?.userAgreement ? "danger" : "primary" }
                      className=""
                      onClick={ () => toggleAgreement('userAgreement') }
                  >
                      {
                        agreements?.userAgreement 
                          ? "Отмена принятий условий соглашения"
                          : "Принимаю условия соглашения"
                      }
                      
                  </IonButton>
                </div>
            </div>
        </IonContent>
    </IonModal>
  );
};

export default EULA;